<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>MATLAB on xym-ee</title>
    <link>https://xym.work/tags/matlab/</link>
    <description>Recent content in MATLAB on xym-ee</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Tue, 18 Jan 2022 19:01:48 +0530</lastBuildDate>
    <atom:link href="https://xym.work/tags/matlab/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>三相异步电动机矢量控制 MATLAB 仿真</title>
      <link>https://xym.work/blog/motor-foc.html</link>
      <pubDate>Tue, 18 Jan 2022 19:01:48 +0530</pubDate>
      <guid>https://xym.work/blog/motor-foc.html</guid>
      <description>矢量控制或者FOC控制近些年逐渐走进日常消费电器了，在一些洗衣机，电动玩具的广告里甚至可以直接看到这个词，我觉得这对消费者来说要求还是有点高了😂😂。&#xA;FOC控制大规模的商业应用也能看出这是一种相当成熟的电机控制方法了，这里做一个异步电机的矢量控制仿真总结。&#xA;矢量控制基本思想 矢量控制这个名字的由来是控制方法里有坐标变换（矢量变换），FOC控制的全名是按照转子磁链定向控制，其含义是在坐标变换后把旋转坐标系的d轴方向固定在转子磁链方向。往往伴随的还有SVPWM这个词，这是一种调制方法，可以提高电压利用率，矢量控制不一定必须用到SVPWM的调制方法。&#xA;矢量控制系统比较复杂，整个系统由很多部分或者叫模块构成，每个模块又有不止一种方法实现，但是使用不同方法的模块实现的功能是一样的。因此比较先进的控制方法也是在整个老的系统结构上去优化一个模块。一个典型的就是无传感器控制，实际上是状态观测器用作传感器。&#xA;首先梳理一下矢量控制的基本思想：&#xA;对于他励式直流电动机来说，接线端子4个，两根为励磁绕组引出，两根电枢绕组引出，磁通和电枢电流可以分开单独控制，磁通恒定后电磁转矩就只和电枢电流有关了。&#xA;对于三相异步交流电机来说，接线端子有6个，如果是接成了Y型不引出中心线，那么端子有3个，这三根线进去的电流有一部分产生磁通，一部分产生电磁转矩，混叠在一起。这也是交流电机控制复杂的原因。&#xA;矢量控制的基本方法是使用坐标变换（矢量变换），核心思路就是把混叠在一起励磁电流和电枢电流分开来，单独控制励磁电流恒定，这样转矩就可以单独由电枢电流控制，和直流电机一样了。坐标变换只是我们看待问题的视角变了，实际电机物理系统的磁动势和功率是个客观量，因此变换原则是保持磁动势不变。分解出励磁电流和电枢电流后，按照给定值加以控制后，还需要再合成三相电流的给定值，让实际电流跟随三相给定电流。这就是基本的矢量控制思路。&#xA;CHBPWM调制矢量控制结构图 根据上面的描述，关注这几个细节：&#xA;如何进行坐标变化。参考系的选取，怎么变才能达到分解电流为励磁分量和转矩分量。&#xA;转子磁链定向问题。在坐标变换中有个坐标系是和转子磁链一同旋转的，因此我们需要知道转子磁链的角度，在对励磁电流进行控制时，也需要知道磁链大小，因此转子磁链计算是要解决的一个问题。&#xA;PWM调制方式。电子电子变压变频器都是要去使用脉冲宽度调制的。在使用PWM时有个小问题，日常家用电220V，如果使用SPWM去产生220V的交流电，使用220V直流电做不到，日常讲的220V交流电是有效值，其标准的数学表达式为$$ u(t) = 220\sqrt{2}\sin(\omega t + \varphi) $$，因此如果使用SPWM调制方法，需要的直流电源为$$ 220\sqrt{2} \approx 311 \mathrm{V} $$，如果要产生有效值380电压的交流电，需要的直流电源约为537V。这就感觉很不舒服，因此如何用电压更小的直流电源产生有效值更大交流电，也是个需要解决的问题。&#xA;如果这几个细节都清楚了，那么矢量控制的核心原理及方法大概也就搞明白了。&#xA;在整个矢量控制细节结构上，还可以进行一些优化改进，比如：&#xA;进行转矩控制提高动态。这是矢量控制里的转矩控制，区别另一种思想直接转矩控制。虽然励磁电流和电枢电流解耦了，但是在控制励磁电流跟随给定的时候还是会有波动，因此为了更好的动态性能，在转矩波形影响转速前就对其进行控制，有两个常用的方法。&#xA;无传感器控制。转速控制需要转速值，一些磁链计算方法也要转速值，现在转速传感器也不想要了，使用算法充当转速传感器，比如状态观测器等一些转子位置估计方法，这也是近些年电机控制的一个新话题。&#xA;以上这些点，后面的仿真都会出现。&#xA;接下来就要开始做仿真了。&#xA;仿真电机参数 被控对象为一台三相笼型异步电动机(Triple-phase asynchronous motor)，铭牌参数：&#xA;额定功率$$ P_N = 3\mathrm{kW} $$ 额定电压$$ U_N = 380 \mathrm{V} $$ 额定电流$$ I_N = 6.9 \mathrm{A} $$ 额定转速$$ n_N = 1400 \mathrm{r/min} $$ 额定频率$$ f_N = 50 \mathrm{Hz} $$ 极对数$$ n_p = 2 $$ 定子绕组$$ \mathrm{Y} $$联结 由实验测得的数据：</description>
    </item>
    <item>
      <title>基于Simscape的倒立摆控制算法仿真</title>
      <link>https://xym.work/blog/simscape.html</link>
      <pubDate>Thu, 19 Aug 2021 19:01:48 +0530</pubDate>
      <guid>https://xym.work/blog/simscape.html</guid>
      <description>各种现代控制方法层出不穷，但是PID万古长青。纵使你理论发展又快又好，工业上还是PID占据了大半江山。没事整整PID还是挺有用的。&#xA;仿真对象 这里用倒立摆作为仿真对象，对各种花式PID的控制效果进行比较。通过对倒立摆这一典型的非线性系统的控制，可以检验各种PID控制方法是否有较强的处理非线性和不稳定性问题的能力。&#xA;常用的机器人仿真工具有Gazebo、Webots、MATLAB等，这里使用到的是MATLAB中的Simscape Multibody模块，MATLAB版本为2019b。Simscape 是 Simulink 的一个模块，而 Simscape Multibody 又是 Simscape 的一个模块。这个模块是一个多体机构仿真环境，提供了几何体、关节、约束、施力单元以及传感器等大量的组件，这使得在MATLAB中搭建一个机构仿真框图十分容易，同时模块集成了3D可视化组件，这使得仿真结果更为直观。&#xA;搭建一个倒立摆的模型，&#xA;设置好各种物理参数，输出4个传感器数据作为反馈参数（不一定都要用到，先留着），打包成一个subsystem。直接启动仿真，可以看到在没有外力所用下，只要有轻微干扰，倒立摆就直接倒了。&#xA;然后把摆杆角度作为反馈，直立状态作为给定计算得到偏差，把摆杆初始角度调成左偏30°，然后随便整两个PD参数，基本上就能立起来了。&#xA;系统结构是下面这个样子，这个结构就代表了很大一类的简单控制系统，比如温度控制、液位控制等。&#xA;控制效果&#xA;当然也可以加上位置控制，看起来更像比较厉害的控制理论。要做的就是在角度控制的基础上串上个位置控制&#xA;对于一个阶跃信号的控制效果&#xA;由此可以看出，PID是个好东西。倒立摆其实并没这么简单，是个挺复杂的小东西，但是在使用PID的时候，完全没考虑其数学模型的问题，就直接让他立了起来，甚至效果还不错。PID让即使是不懂控制控制理论的人也可以随便试几个参数达到这个效果，所以PID的广泛应用也是情理之中的。当然网上讲PID的直观理解的人很多，开车的、倒水的、烧火炉的故事都有人讲过，这些故事对PID的直观理解也有很大帮助。当然PID的在数学上的作用机理没这么好理解，搞控制理论的人总是执着的用数学手段严格证明一个系统的稳定性，关于控制背后的数学原理，后面有空再写写。&#xA;再加点程序控制手段，用$\theta$和$\dot \theta$这两个参数模仿人把摆甩起来，然后偏差小到一定范围内切换角度+位置闭环控制，控制结构图如下图：&#xA;控制效果&#xA;这个启动控制看起来相当厉害，但是控制手段却是最没牌面的，坦率的讲没有用到任何控制算法，这只能叫控制方法，就是个开环盲甩，实际情况下抗干扰能力太差，随便什么参数变一下后果直接不可预测，当然这里启动不是重点，相关方法也有很多比如bangbang控制、能量反馈控制，这些都是有反馈即自动控制的核心思想在里面的。&#xA;到这里一切只是个开始，在比较早的年代，有用纯硬件搭的PID控制电路，随着嵌入式与微电子的发展，数字控制逐渐取代了模拟控制，越来越多的改进PID方法诞生了，这些改进的PID控制方法使得经久不衰的PID再次焕发了生机，这也是本文想学习仿真的东西。&#xA;理论分析 只试两个参数感觉还是差了点意思，毕竟不学控制理论的朋友稍微试试也能到这个效果，还是要理论分析一下才显得像是个学过理论的人。&#xA;理论分析的第一步就是把这个物理的东西先变成数学上的一个式子，俗称数学建模。众所周知，经典控制理论分析的是线性定常微分方程，这个倒立摆输入是力，把摆杆偏角认为是输出，那么正好凑凑能搞出的微分方程，这样就可以进一步分析了。&#xA;$$ F(t) = M \ddot{x}(t) + m [ \ddot{x}(t) + ] $$&#xA;然后工作点附近线性化一下，有了线性定常微分方程了：&#xA;$$ \left[ ml - J\left(\frac{M}{m} + 1\right) \right] \ddot\theta(t) + (M+m)g\theta = f(t)$$&#xA;然后呢，传递函数就有了，这时候，零极点、根轨迹、波特图各种分析手段都可以使用了，各种校正手段都可以用在这个微分方程上。&#xA;如果想更先进一点，可以使用状态空间来描述这个事情。&#xA;。。。。。 （有时间一定补充）&#xA;模糊控制 自适应模糊PID 状态反馈控制 二阶倒立摆状态反馈控制 二阶摆 模型&#xA;不加外力&#xA;并联PD，一般单入单出的控制，不能这么搞的，😂，这个东西不一样，本质上是状态反馈，用极点配置法求出6个反馈参数，所以看起来是并联PD，但是本质是状态反馈。&#xA;来个初始小偏差，看看效果&#xA;能立起来了。</description>
    </item>
  </channel>
</rss>
